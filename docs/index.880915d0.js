/* @license
 * Jacob Perez <https://jacobxperez.github.io/blog/>
 * Copyright (C) 2025 Jacob Perez <jacobxperez@gmx.com>
 * Licensed under the Apache License, Version 2.0
 * http://www.apache.org/licenses/LICENSE-2.0
-----------------------------------------------------------------------------*/
const e={get:(e,t)=>e instanceof Element?e.getAttribute(`data-${t}`):(console.error("data.get: Provided element is not a valid DOM Element."),null),set:(e,t,n="")=>e instanceof Element?(e.setAttribute(`data-${t}`,n),!0):(console.error("data.set: Provided element is not a valid DOM Element."),!1),appendValue(e,t,n){if(!(e instanceof Element))return console.error("data.appendValue: Provided element is not a valid DOM Element."),!1;if("string"!=typeof n)return console.error("data.appendValue: Value must be a string."),!1;let a=e.getAttribute(`data-${t}`),r=new Set(a?a.split(" "):[]);return!r.has(n)&&(r.add(n),e.setAttribute(`data-${t}`,Array.from(r).join(" ")),!0)},remove:(e,t)=>e instanceof Element?(e.removeAttribute(`data-${t}`),!0):(console.error("data.remove: Provided element is not a valid DOM Element."),!1),removeValue(e,t,n){if(!(e instanceof Element))return console.error("data.removeValue: Provided element is not a valid DOM Element."),!1;let a=e.getAttribute(`data-${t}`);if(!a)return console.warn(`data.removeValue: Attribute "data-${t}" does not exist.`),!1;let r=new Set(a.split(" "));return r.delete(n),r.size>0?e.setAttribute(`data-${t}`,Array.from(r).join(" ")):e.removeAttribute(`data-${t}`),!0},has:(e,t)=>e instanceof Element?e.hasAttribute(`data-${t}`):(console.error("data.has: Provided element is not a valid DOM Element."),!1),hasValue(e,t,n){if(!(e instanceof Element))return console.error("data.hasValue: Provided element is not a valid DOM Element."),!1;let a=e.getAttribute(`data-${t}`);return!!a&&a.split(" ").includes(n)},isEmpty(e,t){if(!(e instanceof Element))return console.error("data.isEmpty: Provided element is not a valid DOM Element."),!1;let n=e.getAttribute(`data-${t}`);return null===n||""===n.trim()},isTruthy(e,t){if(!(e instanceof Element))return console.error("data.isTruthy: Provided element is not a valid DOM Element."),!1;let n=e.getAttribute(`data-${t}`)?.toLowerCase();return["true","1","yes","on"].includes(n)},closest:(e,t,n=null)=>e instanceof Element?e.closest(n?`[data-${t}="${n}"]`:`[data-${t}]`):(console.error("data.closest: Provided element is not a valid DOM Element."),null),matches:(e,t,n=null)=>e instanceof Element?e.matches(n?`[data-${t}="${n}"]`:`[data-${t}]`):(console.error("data.matches: Provided element is not a valid DOM Element."),!1),toggle(e,t,n=""){if(!(e instanceof Element))return console.error("data.toggle: Provided element is not a valid DOM Element."),!1;const a=e.getAttribute(`data-${t}`);return a===n||""===n&&null!==a?(e.removeAttribute(`data-${t}`),!1):(e.setAttribute(`data-${t}`,n),!0)},toggleValue(e,t,n="",a=""){if(!(e instanceof Element))return console.error("data.toggleValue: Provided element is not a valid DOM Element."),!1;const r=e.getAttribute(`data-${t}`)===n?a:n;return e.setAttribute(`data-${t}`,r),r},findFirstWithData:(e,t,n=null)=>e instanceof Element?e.querySelector(n?`[data-${t}="${n}"]`:`[data-${t}]`):(console.error("data.findFirstWithData: Provided root is not a valid DOM Element."),null),findAllWithData:(e,t,n=null)=>e instanceof Element?Array.from(e.querySelectorAll(n?`[data-${t}="${n}"]`:`[data-${t}]`)):(console.error("data.findAllWithData: Provided root is not a valid DOM Element."),[]),observe(e,t,n,a={attributes:!0}){if(!(e instanceof Element))return console.error("data.observe: Provided element is not a valid DOM Element."),!1;if("function"!=typeof n)return console.error("data.observe: Callback must be a function."),!1;const r=new MutationObserver((a=>{for(const r of a)r.attributeName===`data-${t}`&&n(e,e.getAttribute(`data-${t}`))}));return r.observe(e,a),r},disconnectObserver:e=>e instanceof MutationObserver?(e.disconnect(),!0):(console.error("data.disconnectObserver: Provided observer is not a valid MutationObserver."),!1),debouncedObserver(e,t,n,a=300,r={attributes:!0}){if(!(e instanceof Element))return console.error("data.debouncedObserver: Provided element is not a valid DOM Element."),!1;if("function"!=typeof n)return console.error("data.debouncedObserver: Callback must be a function."),!1;if("number"!=typeof a||a<0)return console.error("data.debouncedObserver: Delay must be a non-negative number."),!1;let o;const l=new MutationObserver((r=>{clearTimeout(o),o=setTimeout((()=>{for(const a of r)a.attributeName===`data-${t}`&&n(e,e.getAttribute(`data-${t}`))}),a)}));return l.observe(e,r),l}};function t(e){return"function"==typeof e&&e(),this}function n(...e){const t=new Set,n=new Set(["pop","tooltip",...e]);function r(){t.forEach((e=>{n.has(e.dataset.toggle)&&a.data.hasValue(e,"state","active")&&a.data.toggleValue(e,"state","active","inactive")}))}function o(e){const t=a.data.closest(e,"dropbox"),n=a.data.hasValue(e,"state","active");t||n||r(),a.data.toggleValue(e,"state","active","inactive")}return document.addEventListener("click",(e=>{const n=a.data.closest(e.target,"toggle");if(n){if(t.has(n))return;t.add(n),n.addEventListener("click",(e=>{o(n),e.stopPropagation()}),!0),o(n)}else r();e.stopPropagation()})),this}const a=new class{constructor(){this.data=e,this.toggle=n,this.callback=t}data;toggle;callback},r=()=>{const e=document.getElementById("aside"),t=document.getElementById("content");if("post"===meta.type){const n=t.querySelectorAll("h1, h2, h3, h4, h5, h6"),a='\n                <ul id=\'contents\' data-display="small-none">\n                    <li>\n                        <p><strong>Contents</strong></p>\n                    </li>\n                </ul>\n    \n                <ul data-display="small" data-box="border">\n                    <li>\n                        <a data-anchor data-flex data-toggle>\n                            <strong data-item="grow">Contents</strong>\n                            <span data-icon="&#xe043;"></span>\n                        </a>\n    \n                        <ul id=\'contentsDropdown\' data-dropbox>\n                        </ul>\n                    </li>\n                </ul>';e.insertAdjacentHTML("beforeend",a),n.forEach(((e,t)=>{e.setAttribute("id",`${t}`);const n=e.innerText,a=`<li><a href="#${t}">${n}</a></li>`;document.getElementById("contents").insertAdjacentHTML("beforeend",a);const r=`<li><a href="#${t}" data-anchor="menu">${n}</a></li>`;document.getElementById("contentsDropdown").insertAdjacentHTML("beforeend",r)}))}},o={_string(e,t){const n=e.trim(),a=document.querySelector(t);a?a.insertAdjacentHTML("beforeend",n):console.error(`Error: Target element "${t}" not found.`)},_append(e,t,n){if(!e||!t||!n)return void console.error("Error: Invalid arguments in _append().");const a=e.querySelector(t);if(!a)return void console.error(`Error: Template "${t}" not found.`);const r=a.content.cloneNode(!0),o=document.querySelector(n);o?o.appendChild(r):console.error(`Error: Target element "${n}" not found.`)},parser(e,t="text/html"){try{const n=(new DOMParser).parseFromString(e,t);if(!n)throw new Error("Parsing resulted in a null document.");return n}catch(e){return console.error(`Error parsing string: ${e.message}`),null}},create(e,t,n="body"){if("string"!=typeof e||!t)return console.error("Error: Invalid HTML string or missing ID."),null;const a=document.createElement("template");a.innerHTML=e.trim(),a.setAttribute("id",t);const r=document.querySelector(n);return r?(r.appendChild(a),a):(console.error(`Error: Parent element "${n}" not found.`),null)},async string(e,t,n=null){try{return await new Promise(((t,n)=>{"string"!=typeof e?n("Error: Source is not a string."):t()})),this._string(e,t),a.callback?.(n)}catch(e){return console.error(e)}},async append(e,t,n=null){try{return await new Promise(((t,n)=>{e||n("Error: Template selector is required."),t()})),this._append(document,e,t),a.callback?.(n)}catch(e){return console.error(e)}},async fetch(e,t=null){try{const n=await fetch(e);if(!n.ok)throw new Error(`HTTP Error: ${n.status}`);const a=await n.text(),r=this.parser(a);if(!r)return;if(t){const e=r.querySelector(t);e&&!document.getElementById(e.id)?document.body.appendChild(e):console.warn(`Warning: No new template found for "${t}".`)}else r.querySelectorAll("template").forEach((e=>{document.getElementById(e.id)||document.body.appendChild(e)}))}catch(e){console.error(`Fetch error: ${e.message}`)}},removeAll(){document.querySelectorAll("template").forEach((e=>e.remove()))}};document.addEventListener("DOMContentLoaded",(()=>{""===meta.title?meta.title="<h1>Rams</h1>":meta.title=`<h1>${meta.title}</h1>`;let e,t=`\n        <div id="header" data-container>\n            ${meta.title}\n        </div>\n        `,n='\n        <div data-container data-grid="main">\n            <aside id="aside" data-column="large-3 medium-3 small-4"></aside>\n            <article id="content" data-column="large-9 medium-9 small-4"></article>\n        </div>\n        ';"fullPage"===meta.type&&(n='\n        <div id="content" data-container data-grid="main"></div>\n        '),e="localhost"===location.hostname||"127.0.0.1"===location.hostname?window.location.origin+"/templates/index.59811f9a.html":window.location.origin+"/rams/templates/index.19081ad0.html",o.string(`\n        <nav data-navbar="top"></nav>\n        <header data-section="header">\n            ${t}\n        </header>\n        <main data-section="main">\n            ${n}\n        </main>\n        <footer data-section="footer"></footer>\n        `,"body").then((()=>o.append("#headerTemplate","#header"))).then((()=>o.append("#contentTemplate","#content",r))).then((()=>o.fetch(e))).then((()=>{o.append("#navTemplate","nav"),o.append("#footerTemplate","body > footer")})).finally((()=>o.removeAll())),a.toggle()}));