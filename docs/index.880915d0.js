/* @license
 * RAMS <https://jacobxperez.github.io/rams/>
 * Copyright (C) 2025 Jacob Perez <jacobxperez@gmx.com>
 * Licensed under the Apache License, Version 2.0
 * http://www.apache.org/licenses/LICENSE-2.0
-----------------------------------------------------------------------------*/
const t={libraryName:"RAMS",logMessage(t,e,n){const r="error"===n?console.error:console.warn,a=e.replace(/\((.*?)\)/g,"(sanitized)");r(`[${this.libraryName}] ${t}: ${a}`)},logError(t,e){this.logMessage(t,e,"error")},logWarn(t,e){this.logMessage(t,e,"warn")},domElement(t,e){return!(!t||!(t instanceof Element||t instanceof Document||t instanceof DocumentFragment))||(this.logError(e,`Invalid input: Expected a DOM Element, Document, or DocumentFragment, but received ${typeof t} (${t}).`),!1)},isString(t,e){return"string"==typeof t&&""!==t.trim()||(this.logError(e,`Invalid input: must be a non-empty string, but received ${typeof t} (${t}).`),!1)},isFunction(t,e){return"function"==typeof t||(this.logError(e,`Invalid input: callback must be a function, but received ${typeof t} (${t}).`),!1)}};function e(e,n,r=null){const a="getFirstWithDataAttr";return t.domElement(e,a)&&t.isString(n,a)&&(t.isString(r,a)||null===r)?e.querySelector(r?`[data-${n}="${r}"]`:`[data-${n}]`):null}function n(e,n,r=null){const a="getAllWithDataAttr";return t.domElement(e,a)&&t.isString(n,a)&&(t.isString(r,a)||null===r)?Array.from(e.querySelectorAll(r?`[data-${n}="${r}"]`:`[data-${n}]`)):[]}function r(e,n,r=null){const a="setDataAttr";return!(!t.domElement(e,a)||!t.isString(n,a)||!t.isString(r,a)&&null!==r)&&(e.setAttribute(`data-${n}`,r),!0)}function a(e,n,r){const a="appendDataAttrValue";if(!t.domElement(e,a)||!t.isString(n,a)||!t.isString(r,a))return!1;const o=e.getAttribute(`data-${n}`),i=new Set(o?o.trim().split(/\s+/):[]);return i.has(r)?(t.logWarn(a,`Value "${r}" already exists in "data-${n}".`),!1):(i.add(r),e.setAttribute(`data-${n}`,Array.from(i).join(" ")),!0)}function o(e,n){const r="removeDataAttr";return!(!t.domElement(e,r)||!t.isString(n,r))&&(e.removeAttribute(`data-${n}`),!0)}function i(e,n,r){const a="removeDataAttrValue";if(!t.domElement(e,a)||!t.isString(n,a)||!t.isString(r,a))return!1;let o=e.getAttribute(`data-${n}`);if(!o)return t.logWarn(a,`Attribute "data-${n}" does not exist.`),!1;let i=new Set(o.trim().split(/\s+/));return i.delete(r),i.size>0?e.setAttribute(`data-${n}`,Array.from(i).join(" ")):e.removeAttribute(`data-${n}`),!0}function s(e,n,r,a){const o="replaceDataAttrValue";if(!(t.domElement(e,o)&&t.isString(n,o)&&t.isString(r,o)&&t.isString(a,o)))return!1;const i=e.getAttribute(`data-${n}`);if(!i)return t.logWarn(o,`Attribute "data-${n}" does not exist.`),!1;const s=i.trim().split(/\s+/),l=s.indexOf(r);return-1===l?(t.logWarn(o,`Value "${r}" not found in "data-${n}".`),!1):(s[l]=a,e.setAttribute(`data-${n}`,s.join(" ")),!0)}function l(e,n,r=null){const a="hasDataAttr";if(!t.domElement(e,a)||!t.isString(n,a))return!1;if(!e.hasAttribute(`data-${n}`))return!1;if(null===r)return!0;if(!t.isString(r,a)&&null!==r)return!1;const o=e.getAttribute(`data-${n}`);return!!o&&o.trim().split(/\s+/).includes(r)}function c(e,n){const r="isEmpty";if(!t.domElement(e,r)||!t.isString(n,r))return!1;let a=e.getAttribute(`data-${n}`);return null===a||""===a.trim()}function u(e,n,r=null){const a="closestDataAttr";return t.domElement(e,a)&&t.isString(n,a)&&(t.isString(r,a)||null===r)?e.closest(r?`[data-${n}="${r}"]`:`[data-${n}]`):null}function d(e,n,r=null){const a="matchesDataAttr";return!(!t.domElement(e,a)||!t.isString(n,a)||!t.isString(r,a)&&null!==r)&&e.matches(r?`[data-${n}="${r}"]`:`[data-${n}]`)}function m(e,n,r=null){const a="toggleDataAttr";if(!t.domElement(e,a)||!t.isString(n,a)||!t.isString(r,a)&&null!==r)return!1;const o=e.getAttribute(`data-${n}`);return o===r||""===r&&null!==o?(e.removeAttribute(`data-${n}`),!1):(e.setAttribute(`data-${n}`,r),!0)}function g(e,n,r,a){const o="toggleDataAttrValue";if(!(t.domElement(e,o)&&t.isString(n,o)&&t.isString(r,o)&&t.isString(a,o)))return!1;const i=e.getAttribute(`data-${n}`)===r?a:r;return e.setAttribute(`data-${n}`,i),i}function f(e,n,r,a={attributes:!0}){const o="observe";if(!t.domElement(e,o)||!t.isString(n,o))return!1;if("function"!=typeof r)return t.logError(o,"Callback must be a function."),!1;const i=new MutationObserver((t=>{for(const a of t)a.attributeName===`data-${n}`&&r(e,e.getAttribute(`data-${n}`))}));return i.observe(e,a),i}function h(e){return e instanceof MutationObserver?(e.disconnect(),!0):(t.logError("disconnectObserver","Provided observer is not a valid MutationObserver."),!1)}function p(e,n,r,a=300,o={attributes:!0}){const i="debouncedObserver";if(!t.domElement(e,i)||!t.isString(n,i))return!1;if("function"!=typeof r)return t.logError(i,"Callback must be a function."),!1;if("number"!=typeof a||a<0)return t.logError(i,"Delay must be a non-negative number."),!1;let s;const l=new MutationObserver((t=>{clearTimeout(s),s=setTimeout((()=>{t.forEach((t=>{t.attributeName===`data-${n}`&&r(e,e.getAttribute(`data-${n}`))}))}),a)}));return l.observe(e,o),l}function b(e){t.isFunction(e,"callback")&&e()}function A(...t){const e=new Set,n=new Set(["pop","tooltip",...t]);function r(){e.forEach((t=>{n.has(t.dataset.toggle)&&$.hasDataAttr(t,"state","active")&&$.toggleDataAttrValue(t,"state","active","inactive")}))}function a(t){const e=$.closestDataAttr(t,"dropbox"),n=$.hasDataAttr(t,"state","active");e||n||r(),$.toggleDataAttrValue(t,"state","active","inactive")}return document.addEventListener("click",(t=>{const n=$.closestDataAttr(t.target,"toggle");if(n){if(n){if(e.has(n))return;e.add(n),n.addEventListener("click",(t=>{a(n),t.stopPropagation()}),!0),a(n)}else r();t.stopPropagation()}else r()})),this}const $=new class extends Array{constructor(){super(),this.toggle=A,this.callback=b,this.getFirstWithDataAttr=e,this.getAllWithDataAttr=n,this.setDataAttr=r,this.appendDataAttrValue=a,this.removeDataAttr=o,this.removeDataAttrValue=i,this.replaceDataAttrValue=s,this.hasDataAttr=l,this.isEmpty=c,this.closestDataAttr=u,this.matchesDataAttr=d,this.toggleDataAttr=m,this.toggleDataAttrValue=g,this.observe=f,this.disconnectObserver=h,this.debouncedObserver=p}},v=()=>{const t=document.getElementById("aside"),e=document.getElementById("content");if("post"===meta.type){const n=e.querySelectorAll("h1, h2, h3, h4, h5, h6"),r='\n                <ul id=\'contents\' data-display="small-none">\n                    <li>\n                        <p><strong>Contents</strong></p>\n                    </li>\n                </ul>\n    \n                <ul data-display="small" data-box="border">\n                    <li>\n                        <a data-anchor data-flex data-toggle>\n                            <strong data-item="grow">Contents</strong>\n                            <span data-icon="&#xe043;"></span>\n                        </a>\n    \n                        <ul id=\'contentsDropdown\' data-dropbox>\n                        </ul>\n                    </li>\n                </ul>';t.insertAdjacentHTML("beforeend",r),n.forEach(((t,e)=>{t.setAttribute("id",`${e}`);const n=t.innerText,r=`<li><a href="#${e}">${n}</a></li>`;document.getElementById("contents").insertAdjacentHTML("beforeend",r);const a=`<li><a href="#${e}" data-anchor="menu">${n}</a></li>`;document.getElementById("contentsDropdown").insertAdjacentHTML("beforeend",a)}))}},E={_string(t,e){const n=t.trim(),r=document.querySelector(e);r?r.insertAdjacentHTML("beforeend",n):console.error(`Error: Target element "${e}" not found.`)},_append(t,e,n){if(!t||!e||!n)return void console.error("Error: Invalid arguments in _append().");const r=t.querySelector(e);if(!r)return void console.error(`Error: Template "${e}" not found.`);const a=r.content.cloneNode(!0),o=document.querySelector(n);o?o.appendChild(a):console.error(`Error: Target element "${n}" not found.`)},parser(t,e="text/html"){try{const n=(new DOMParser).parseFromString(t,e);if(!n)throw new Error("Parsing resulted in a null document.");return n}catch(t){return console.error(`Error parsing string: ${t.message}`),null}},create(t,e,n="body"){if("string"!=typeof t||!e)return console.error("Error: Invalid HTML string or missing ID."),null;const r=document.createElement("template");r.innerHTML=t.trim(),r.setAttribute("id",e);const a=document.querySelector(n);return a?(a.appendChild(r),r):(console.error(`Error: Parent element "${n}" not found.`),null)},async string(t,e,n=null){try{return await new Promise(((e,n)=>{"string"!=typeof t?n("Error: Source is not a string."):e()})),this._string(t,e),$.callback?.(n)}catch(t){return console.error(t)}},async append(t,e,n=null){try{return await new Promise(((e,n)=>{t||n("Error: Template selector is required."),e()})),this._append(document,t,e),$.callback?.(n)}catch(t){return console.error(t)}},async fetch(t,e=null){try{const n=await fetch(t);if(!n.ok)throw new Error(`HTTP Error: ${n.status}`);const r=await n.text(),a=this.parser(r);if(!a)return;if(e){const t=a.querySelector(e);t&&!document.getElementById(t.id)?document.body.appendChild(t):console.warn(`Warning: No new template found for "${e}".`)}else a.querySelectorAll("template").forEach((t=>{document.getElementById(t.id)||document.body.appendChild(t)}))}catch(t){console.error(`Fetch error: ${t.message}`)}},removeAll(){document.querySelectorAll("template").forEach((t=>t.remove()))}};document.addEventListener("DOMContentLoaded",(()=>{""===meta.title?meta.title="<h1>RAMS</h1>":meta.title=`<h1>${meta.title}</h1>`;let t,e=`\n        <div id="header" data-container>\n            ${meta.title}\n        </div>\n        `,n='\n        <div data-container data-grid="main">\n            <aside id="aside" data-column="large-3 medium-3 small-4"></aside>\n            <article id="content" data-column="large-9 medium-9 small-4"></article>\n        </div>\n        ';"fullPage"===meta.type&&(n='\n        <div id="content" data-container data-grid="main"></div>\n        '),t="localhost"===location.hostname||"127.0.0.1"===location.hostname?window.location.origin+"/templates/index.59811f9a.html":window.location.origin+"/rams/templates/index.19081ad0.html",E.string(`\n        <nav data-navbar="top"></nav>\n        <header data-section="header">\n            ${e}\n        </header>\n        <main data-section="main">\n            ${n}\n        </main>\n        <footer data-section="footer"></footer>\n        `,"body").then((()=>E.append("#headerTemplate","#header"))).then((()=>E.append("#contentTemplate","#content",v))).then((()=>E.fetch(t))).then((()=>{E.append("#navTemplate","nav"),E.append("#footerTemplate","body > footer")})).finally((()=>E.removeAll())),$.toggle()}));