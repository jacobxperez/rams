/* @license
 * RAMS <https://jacobxperez.github.io/rams/>
 * Copyright (C) 2025 Jacob Perez <jacobxperez@gmx.com>
 * Licensed under the Apache License, Version 2.0
 * http://www.apache.org/licenses/LICENSE-2.0
-----------------------------------------------------------------------------*/
const t=t=>"function"==typeof t,e=t=>t&&(t instanceof Element||t instanceof Document||t instanceof DocumentFragment),r=t=>"string"==typeof t&&""!==t.trim(),n=t=>{return r(t)?""===t.trim():(e=t,Array.isArray(e)?0===t.length:"object"==typeof(n=t)&&null!==n&&!Array.isArray(n)&&0===Object.keys(t).length);var e,n},a=t=>e=>void 0===e||t(e),o=((...t)=>e=>t.every((t=>t(e))))(e,r,r);function i(t,e){return e?`[data-${t}="${e}"]`:`[data-${t}]`}const s=(t,e,r=null)=>o(t,e,r)||a(r)?t.querySelector(i(e,r)):null,l=(t,e,r=null)=>o(t,e,r)||a(r)?Array.from(t.querySelectorAll(i(e,r))):[],d=(t,e,r="")=>!(!o(t,e,r)&&!n(r))&&(t.setAttribute(`data-${e}`,r),!0),c=(t,n,a)=>{const o="appendDataAttrValue";if(e(t)&&r(n)&&r(a)){const e=t.getAttribute(`data-${n}`),r=e?new Set(e.trim().split(/\s+/)):new Set;if(r.has(a))throw new Error(`${o}: Value "${a}" already exists in "data-${n}".`);return r.add(a),t.setAttribute(`data-${n}`,Array.from(r).join(" ")),!0}throw new Error(`${o}: Invalid arguments provided.`)},u=(t,n)=>!(!e(t)||!r(n))&&(!!t.hasAttribute(`data-${n}`)&&(t.removeAttribute(`data-${n}`),!0)),m=(t,n,a)=>{const o="removeDataAttrValue";if(e(t)&&r(n)&&r(a)){let e=t.getAttribute(`data-${n}`);if(!e)throw new Error(`${o}: Attribute "data-${n}" does not exist.`);let r=new Set(e.trim().split(/\s+/));return r.delete(a),r.size>0?t.setAttribute(`data-${n}`,Array.from(r).join(" ")):t.removeAttribute(`data-${n}`),!0}throw new Error(`${o}: Invalid arguments provided.`)},h=(t,n,a,o)=>{const i="replaceDataAttrValue";if(e(t)&&r(n)&&r(a)&&r(o)){const e=t.getAttribute(`data-${n}`);if(!e)throw new Error(`${i}: Attribute "data-${n}" does not exist.`);const r=e.trim().split(/\s+/),s=r.indexOf(a);if(-1===s)throw new Error(`${i}: Value "${a}" not found in "data-${n}".`);return r[s]=o,t.setAttribute(`data-${n}`,r.join(" ")),!0}throw new Error(`${i}: Invalid arguments provided.`)},p=(t,n,a=null)=>{if(e(t)&&r(n)){if(!t.hasAttribute(`data-${n}`))return!1;if(null===a)return!0;if(!r(a)&&null!==a)return!1;const e=t.getAttribute(`data-${n}`);return!!e&&e.trim().split(/\s+/).includes(a)}return!1},f=(t,n)=>{if(e(t)&&r(n)){let e=t.getAttribute(`data-${n}`);return null===e||""===e.trim()}return!1},g=(t,e,r)=>o(t,e,r)||a(r)?t.closest(i(e,r)):null,A=(t,e,r)=>!(!o(t,e,r)&&!a(r))&&t.matches(i(e,r)),$=(t,e,r)=>{if(o(t,e,r)||a(r)){const n=t.getAttribute(`data-${e}`);return n===r||""===r&&null!==n?(t.removeAttribute(`data-${e}`),!1):(t.setAttribute(`data-${e}`,r),!0)}return!1},y=(t,n,a,o)=>{if(e(t)&&r(n)&&r(a)&&r(o)){const e=t.getAttribute(`data-${n}`)===a?o:a;return t.setAttribute(`data-${n}`,e),e}return!1},v=(...t)=>{const e=new Set,r=new Set(["pop","tooltip",...t]);function n(){e.forEach((t=>{r.has(t.dataset.toggle)&&p(t,"state","active")&&y(t,"state","active","inactive")}))}function a(t){const e=g(t,"dropbox"),r=p(t,"state","active");e||r||n(),y(t,"state","active","inactive")}document.addEventListener("click",(t=>{const r=g(t.target,"toggle");if(r){if(r){if(e.has(r))return;e.add(r),r.addEventListener("click",(t=>{a(r),t.stopPropagation()}),!0),a(r)}else n();t.stopPropagation()}else n()}))};const w=new class{constructor(){this.toggle=v,this.getFirstWithDataAttr=s,this.getAllWithDataAttr=l,this.setDataAttr=d,this.appendDataAttrValue=c,this.removeDataAttr=u,this.removeDataAttrValue=m,this.replaceDataAttrValue=h,this.hasDataAttr=p,this.dataAttrIsEmpty=f,this.closestDataAttr=g,this.matchesDataAttr=A,this.toggleDataAttr=$,this.toggleDataAttrValue=y}},b=()=>{const t=document.getElementById("aside"),e=document.getElementById("content");if("post"===meta.type){const r=e.querySelectorAll("h1, h2, h3, h4, h5, h6"),n='\n                <ul id=\'contents\' data-display="small-none">\n                    <li>\n                        <p><strong>Contents</strong></p>\n                    </li>\n                </ul>\n    \n                <ul data-display="small" data-box="border">\n                    <li>\n                        <a data-anchor data-flex data-toggle>\n                            <strong data-item="grow">Contents</strong>\n                            <span data-icon="&#xe043;"></span>\n                        </a>\n    \n                        <ul id=\'contentsDropdown\' data-dropbox>\n                        </ul>\n                    </li>\n                </ul>';t.insertAdjacentHTML("beforeend",n),r.forEach(((t,e)=>{t.setAttribute("id",`${e}`);const r=t.innerText,n=`<li><a href="#${e}">${r}</a></li>`;document.getElementById("contents").insertAdjacentHTML("beforeend",n);const a=`<li><a href="#${e}" data-anchor="menu">${r}</a></li>`;document.getElementById("contentsDropdown").insertAdjacentHTML("beforeend",a)}))}},E={_string(t,e){const r=t.trim(),n=document.querySelector(e);n?n.insertAdjacentHTML("beforeend",r):console.error(`Error: Target element "${e}" not found.`)},_append(t,e,r){if(!t||!e||!r)return void console.error("Error: Invalid arguments in _append().");const n=t.querySelector(e);if(!n)return void console.error(`Error: Template "${e}" not found.`);const a=n.content.cloneNode(!0),o=document.querySelector(r);o?o.appendChild(a):console.error(`Error: Target element "${r}" not found.`)},parser(t,e="text/html"){try{const r=(new DOMParser).parseFromString(t,e);if(!r)throw new Error("Parsing resulted in a null document.");return r}catch(t){return console.error(`Error parsing string: ${t.message}`),null}},create(t,e,r="body"){if("string"!=typeof t||!e)return console.error("Error: Invalid HTML string or missing ID."),null;const n=document.createElement("template");n.innerHTML=t.trim(),n.setAttribute("id",e);const a=document.querySelector(r);return a?(a.appendChild(n),n):(console.error(`Error: Parent element "${r}" not found.`),null)},async string(e,r,n){try{await new Promise(((t,r)=>{"string"!=typeof e?r("Error: Source is not a string."):t()})),this._string(e,r),t(n)&&n()}catch(t){return console.error(t)}},async append(e,r,n){try{await new Promise(((t,r)=>{e||r("Error: Template selector is required."),t()})),this._append(document,e,r),t(n)&&n()}catch(t){return console.error(t)}},async fetch(t,e=null){try{const r=await fetch(t);if(!r.ok)throw new Error(`HTTP Error: ${r.status}`);const n=await r.text(),a=this.parser(n);if(!a)return;if(e){const t=a.querySelector(e);t&&!document.getElementById(t.id)?document.body.appendChild(t):console.warn(`Warning: No new template found for "${e}".`)}else a.querySelectorAll("template").forEach((t=>{document.getElementById(t.id)||document.body.appendChild(t)}))}catch(t){console.error(`Fetch error: ${t.message}`)}},removeAll(){document.querySelectorAll("template").forEach((t=>t.remove()))}};document.addEventListener("DOMContentLoaded",(()=>{""===meta.title?meta.title="<h1>RAMS</h1>":meta.title=`<h1>${meta.title}</h1>`;let t,e=`\n        <div id="header" data-container>\n            ${meta.title}\n        </div>\n        `,r='\n        <div data-container data-grid="main">\n            <aside id="aside" data-column="large-3 medium-3 small-4"></aside>\n            <article id="content" data-column="large-9 medium-9 small-4"></article>\n        </div>\n        ';"fullPage"===meta.type&&(r='\n        <div id="content" data-container data-grid="main"></div>\n        '),t="localhost"===location.hostname||"127.0.0.1"===location.hostname?window.location.origin+"/templates/index.59811f9a.html":window.location.origin+"/rams/templates/index.19081ad0.html",E.string(`\n        <nav data-navbar="top"></nav>\n        <header data-section="header">\n            ${e}\n        </header>\n        <main data-section="main">\n            ${r}\n        </main>\n        <footer data-section="footer"></footer>\n        `,"body").then((()=>E.append("#headerTemplate","#header"))).then((()=>E.append("#contentTemplate","#content",b))).then((()=>E.fetch(t))).then((()=>{E.append("#navTemplate","nav"),E.append("#footerTemplate","body > footer")})).finally((()=>E.removeAll())),w.toggle()}));