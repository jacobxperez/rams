/* @license
 * RAMS <https://jacobxperez.github.io/rams/>
 * Copyright (C) 2025 Jacob Perez <jacobxperez@gmx.com>
 * Licensed under the Apache License, Version 2.0
 * http://www.apache.org/licenses/LICENSE-2.0
-----------------------------------------------------------------------------*/
const t={validateRoot:(t,e)=>t instanceof Element||t instanceof Document||t instanceof DocumentFragment||(console.error(`[RAMS] ${e}: Provided element is not a valid DOM Element.`),!1),validateDataName:(t,e)=>"string"==typeof t&&""!==t.trim()||(console.error(`[RAMS] ${e}: dataName must be a non-empty string.`),!1),validateDataValue:(t,e)=>null===t||"string"==typeof t||(console.error(`[RAMS] ${e}: dataValue must be a string if provided.`),!1),getDataAttr(t,e,a=null){return this.validateRoot(t,"dom.getDataAttr")&&this.validateDataName(e,"dom.getDataAttr")&&this.validateDataValue(a,"dom.getDataAttr")?t.querySelector(a?`[data-${e}="${a}"]`:`[data-${e}]`):null},getAllDataAttr(t,e,a=null){return this.validateRoot(t,"dom.getAllDataAttr")&&this.validateDataName(e,"dom.getAllDataAttr")&&this.validateDataValue(a,"dom.getAllDataAttr")?Array.from(t.querySelectorAll(a?`[data-${e}="${a}"]`:`[data-${e}]`)):[]},setDataAttr(t,e,a=null){return!!(this.validateRoot(t,"dom.setDataAttr")&&this.validateDataName(e,"dom.setDataAttr")&&this.validateDataValue(a,"dom.setDataAttr"))&&(t.setAttribute(`data-${e}`,a),!0)},appendDataAttrValue(t,e,a){if(!this.validateRoot(t,"dom.appendDataAttrValue")||!this.validateDataName(e,"dom.appendDataAttrValue")||!this.validateDataValue(a,"dom.appendDataAttrValue"))return!1;let r=t.getAttribute(`data-${e}`),o=new Set(r?r.trim().split(/\s+/):[]);return!o.has(a)&&(o.add(a),t.setAttribute(`data-${e}`,Array.from(o).join(" ")),!0)},removeDataAttr(t,e){return!(!this.validateRoot(t,"dom.removeDataAttr")||!this.validateDataName(e,"dom.removeDataAttr"))&&(t.removeAttribute(`data-${e}`),!0)},removeDataAttrValue(t,e,a){if(!this.validateRoot(t,"dom.removeDataAttrValue")||!this.validateDataName(e,"dom.removeDataAttrValue")||!this.validateDataValue(a,"dom.removeDataAttrValue"))return!1;let r=t.getAttribute(`data-${e}`);if(!r)return console.warn(`[RAMS] dom.removeDataAttrValue: Attribute "data-${e}" does not exist.`),!1;let o=new Set(r.trim().split(/\s+/));return o.delete(a),o.size>0?t.setAttribute(`data-${e}`,Array.from(o).join(" ")):t.removeAttribute(`data-${e}`),!0},replaceDataAttrValue(t,e,a,r){if(!(this.validateRoot(t,"dom.replaceDataAttrValue")&&this.validateDataName(e,"dom.replaceDataAttrValue")&&this.validateDataValue(a,"dom.replaceDataAttrValue")&&this.validateDataValue(r,"dom.replaceDataAttrValue")))return!1;let o=t.getAttribute(`data-${e}`);if(!o)return!1;let n=o.trim().split(/\s+/),i=n.indexOf(a);return-1!==i&&(n[i]=r,t.setAttribute(`data-${e}`,n.join(" ")),!0)},hasDataAttr(t,e,a=null){const r="dom.hasDataAttr";if(!this.validateRoot(t,r)||!this.validateDataName(e,r))return!1;if(!t.hasAttribute(`data-${e}`))return!1;if(null===a)return!0;if(!this.validateDataValue(a,r))return!1;const o=t.getAttribute(`data-${e}`);return!!o&&o.trim().split(/\s+/).includes(a)},isEmpty(t,e){if(!this.validateRoot(t,"dom.isEmpty")||!this.validateDataName(e,"dom.isEmpty"))return!1;let a=t.getAttribute(`data-${e}`);return null===a||""===a.trim()},closestDataAttr(t,e,a=null){return this.validateRoot(t,"dom.closestDataAttr")&&this.validateDataName(e,"dom.closestDataAttr")&&this.validateDataValue(a,"dom.closestDataAttr")?t.closest(a?`[data-${e}="${a}"]`:`[data-${e}]`):null},matchesDataAttr(t,e,a=null){return!!(this.validateRoot(t,"dom.matchesDataAttr")&&this.validateDataName(e,"dom.matchesDataAttr")&&this.validateDataValue(a,"dom.matchesDataAttr"))&&t.matches(a?`[data-${e}="${a}"]`:`[data-${e}]`)},toggleDataAttr(t,e,a=null){if(!this.validateRoot(t,"dom.toggleDataAttr")||!this.validateDataName(e,"dom.toggleDataAttr")||!this.validateDataValue(a,"dom.toggleDataAttr"))return!1;const r=t.getAttribute(`data-${e}`);return r===a||""===a&&null!==r?(t.removeAttribute(`data-${e}`),!1):(t.setAttribute(`data-${e}`,a),!0)},toggleDataAttrValue(t,e,a=null,r=null){if(!(this.validateRoot(t,"dom.toggleDataAttrValue")&&this.validateDataName(e,"dom.toggleDataAttrValue")&&this.validateDataValue(a,"dom.toggleDataAttrValue")&&this.validateDataValue(r,"dom.toggleDataAttrValue")))return!1;const o=t.getAttribute(`data-${e}`)===a?r:a;return t.setAttribute(`data-${e}`,o),o},observe(t,e,a,r={attributes:!0}){if(!this.validateRoot(t,"dom.observe")||!this.validateDataName(e,"dom.observe"))return!1;if("function"!=typeof a)return console.error("[RAMS] dom.observe: Callback must be a function."),!1;const o=new MutationObserver((r=>{for(const o of r)o.attributeName===`data-${e}`&&a(t,t.getAttribute(`data-${e}`))}));return o.observe(t,r),o},disconnectObserver:t=>t instanceof MutationObserver?(t.disconnect(),!0):(console.error("[RAMS] dom.disconnectObserver: Provided observer is not a valid MutationObserver."),!1),debouncedObserver(t,e,a,r=300,o={attributes:!0}){if(!this.validateRoot(t,"dom.debouncedObserver")||!this.validateDataName(e,"dom.debouncedObserver"))return!1;if("function"!=typeof a)return console.error("[RAMS] dom.debouncedObserver: Callback must be a function."),!1;if("number"!=typeof r||r<0)return console.error("[RAMS] dom.debouncedObserver: Delay must be a non-negative number."),!1;let n;const i=new MutationObserver((o=>{clearTimeout(n),n=setTimeout((()=>{for(const r of o)r.attributeName===`data-${e}`&&a(t,t.getAttribute(`data-${e}`))}),r)}));return i.observe(t,o),i}};function e(t){if("function"!=typeof t)return console.error("[RAMS] callback: Callback must be a function."),!1;t()}function a(...t){const e=new Set,a=new Set(["pop","tooltip",...t]);function o(){e.forEach((t=>{a.has(t.dataset.toggle)&&r.dom.hasDataAttr(t,"state","active")&&r.dom.toggleDataAttrValue(t,"state","active","inactive")}))}function n(t){const e=r.dom.closestDataAttr(t,"dropbox"),a=r.dom.hasDataAttr(t,"state","active");e||a||o(),r.dom.toggleDataAttrValue(t,"state","active","inactive")}return document.addEventListener("click",(t=>{const a=r.dom.closestDataAttr(t.target,"toggle");if(a){if(a){if(e.has(a))return;e.add(a),a.addEventListener("click",(t=>{n(a),t.stopPropagation()}),!0),n(a)}else o();t.stopPropagation()}else o()})),this}const r=new class{constructor(){this.dom=t,this.toggle=a,this.callback=e}dom;toggle;callback},o=()=>{const t=document.getElementById("aside"),e=document.getElementById("content");if("post"===meta.type){const a=e.querySelectorAll("h1, h2, h3, h4, h5, h6"),r='\n                <ul id=\'contents\' data-display="small-none">\n                    <li>\n                        <p><strong>Contents</strong></p>\n                    </li>\n                </ul>\n    \n                <ul data-display="small" data-box="border">\n                    <li>\n                        <a data-anchor data-flex data-toggle>\n                            <strong data-item="grow">Contents</strong>\n                            <span data-icon="&#xe043;"></span>\n                        </a>\n    \n                        <ul id=\'contentsDropdown\' data-dropbox>\n                        </ul>\n                    </li>\n                </ul>';t.insertAdjacentHTML("beforeend",r),a.forEach(((t,e)=>{t.setAttribute("id",`${e}`);const a=t.innerText,r=`<li><a href="#${e}">${a}</a></li>`;document.getElementById("contents").insertAdjacentHTML("beforeend",r);const o=`<li><a href="#${e}" data-anchor="menu">${a}</a></li>`;document.getElementById("contentsDropdown").insertAdjacentHTML("beforeend",o)}))}},n={_string(t,e){const a=t.trim(),r=document.querySelector(e);r?r.insertAdjacentHTML("beforeend",a):console.error(`Error: Target element "${e}" not found.`)},_append(t,e,a){if(!t||!e||!a)return void console.error("Error: Invalid arguments in _append().");const r=t.querySelector(e);if(!r)return void console.error(`Error: Template "${e}" not found.`);const o=r.content.cloneNode(!0),n=document.querySelector(a);n?n.appendChild(o):console.error(`Error: Target element "${a}" not found.`)},parser(t,e="text/html"){try{const a=(new DOMParser).parseFromString(t,e);if(!a)throw new Error("Parsing resulted in a null document.");return a}catch(t){return console.error(`Error parsing string: ${t.message}`),null}},create(t,e,a="body"){if("string"!=typeof t||!e)return console.error("Error: Invalid HTML string or missing ID."),null;const r=document.createElement("template");r.innerHTML=t.trim(),r.setAttribute("id",e);const o=document.querySelector(a);return o?(o.appendChild(r),r):(console.error(`Error: Parent element "${a}" not found.`),null)},async string(t,e,a=null){try{return await new Promise(((e,a)=>{"string"!=typeof t?a("Error: Source is not a string."):e()})),this._string(t,e),r.callback?.(a)}catch(t){return console.error(t)}},async append(t,e,a=null){try{return await new Promise(((e,a)=>{t||a("Error: Template selector is required."),e()})),this._append(document,t,e),r.callback?.(a)}catch(t){return console.error(t)}},async fetch(t,e=null){try{const a=await fetch(t);if(!a.ok)throw new Error(`HTTP Error: ${a.status}`);const r=await a.text(),o=this.parser(r);if(!o)return;if(e){const t=o.querySelector(e);t&&!document.getElementById(t.id)?document.body.appendChild(t):console.warn(`Warning: No new template found for "${e}".`)}else o.querySelectorAll("template").forEach((t=>{document.getElementById(t.id)||document.body.appendChild(t)}))}catch(t){console.error(`Fetch error: ${t.message}`)}},removeAll(){document.querySelectorAll("template").forEach((t=>t.remove()))}};document.addEventListener("DOMContentLoaded",(()=>{""===meta.title?meta.title="<h1>RAMS</h1>":meta.title=`<h1>${meta.title}</h1>`;let t,e=`\n        <div id="header" data-container>\n            ${meta.title}\n        </div>\n        `,a='\n        <div data-container data-grid="main">\n            <aside id="aside" data-column="large-3 medium-3 small-4"></aside>\n            <article id="content" data-column="large-9 medium-9 small-4"></article>\n        </div>\n        ';"fullPage"===meta.type&&(a='\n        <div id="content" data-container data-grid="main"></div>\n        '),t="localhost"===location.hostname||"127.0.0.1"===location.hostname?window.location.origin+"/templates/index.59811f9a.html":window.location.origin+"/rams/templates/index.19081ad0.html",n.string(`\n        <nav data-navbar="top"></nav>\n        <header data-section="header">\n            ${e}\n        </header>\n        <main data-section="main">\n            ${a}\n        </main>\n        <footer data-section="footer"></footer>\n        `,"body").then((()=>n.append("#headerTemplate","#header"))).then((()=>n.append("#contentTemplate","#content",o))).then((()=>n.fetch(t))).then((()=>{n.append("#navTemplate","nav"),n.append("#footerTemplate","body > footer")})).finally((()=>n.removeAll())),r.toggle()}));